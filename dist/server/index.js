var snakey3=function(e){var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="dist/server/",s(s.s=9)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NEVER="Never happens. See comment in source."}(t.SkErrors||(t.SkErrors={})),t.applyMixins=function(e,t){t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))})})},function(e){e.HOST_REGISTRATION="/host-reg",e.GROUP_PREFIX="/group"}(t.SnakeyNsps||(t.SnakeyNsps={}));class r{}t.Player=r,function(e){let t;e.Family=Object.freeze({HUMAN:"HUMAN",CHASER:"CHASER"}),e.Family,function(e){e.NULL=void 0}(t=e.Id||(e.Id={})),e.MoveType=Object.freeze({NORMAL:"NORMAL",BOOST:"BOOST"}),e.MoveType}(r=t.Player||(t.Player={})),Object.freeze(r),Object.freeze(r.prototype);class a{}t.Lang=a,function(e){let t,s,r;!function(e){e.REGEXP=new RegExp("^[a-zA-Z0-9!@#$%^&*()-_=+;:'\"\\|,.<>/?]+$")}(t=e.Seq||(e.Seq={})),function(e){e.NULL=Object.freeze({char:"",seq:""})}(s=e.CharSeqPair||(e.CharSeqPair={})),function(e){e.SEQ="SEQ",e.CHAR="CHAR",e.WEIGHT="WEIGHT"}(r=e.BalancingScheme||(e.BalancingScheme={})),e.__RemapTemplates=Object.freeze({IDENTITY:e=>e,TO_LOWER:e=>e.toLowerCase()}),e.__RemapTemplates,e.FrontendDescs=Object.freeze([{id:"engl-low",module:"English",export:"Lowercase",numLeaves:26,remapFunc:e.__RemapTemplates.TO_LOWER,display:"English Lowercase (QWERTY)",blurb:""},{id:"engl-mix",module:"English",export:"MixedCase",numLeaves:52,remapFunc:e.__RemapTemplates.IDENTITY,display:"English Mixed-Case (QWERTY)",blurb:""},{id:"japn-hir",module:"Japanese",export:"Hiragana",numLeaves:71,remapFunc:e.__RemapTemplates.TO_LOWER,display:"Japanese Hiragana",blurb:""},{id:"japn-kat",module:"Japanese",export:"Katakana",numLeaves:70,remapFunc:e.__RemapTemplates.TO_LOWER,display:"Japanese Katakana",blurb:""},{id:"kore-dub",module:"Korean",export:"Dubeolsik",numLeaves:9177,remapFunc:e.__RemapTemplates.IDENTITY,display:"Korean Dubeolsik (두벌식 키보드)",blurb:"The most common keyboard layout, and South Korea's only Hangul standard since 1969. Consonants are on the left, and vowels on the right."},{id:"kore-sub",module:"Korean",export:"Sebeolsik",numLeaves:10206,remapFunc:e.__RemapTemplates.IDENTITY,display:"Korean Sebeolsik (세벌식 최종 키보드)",blurb:"Another Hangul keyboard layout used in South Korea, and the final Sebeolsik layout designed by Dr. Kong Byung Woo, hence the name. Syllable-initial consonants are on the right, final consonants on the left, and vowels in the middle. It is more ergonomic than the dubeolsik, but not widely used."},{id:"kore-rom",module:"Korean",export:"Romanization",numLeaves:3990,remapFunc:e.__RemapTemplates.TO_LOWER,display:"Korean Revised Romanization",blurb:"The Revised Romanization of Korean (국어의 로마자 표기법; 國語의 로마字 表記法) is the official South Korean language romanization system. It was developed by the National Academy of the Korean Language from 1995, and was released on 7 July 2000 by South Korea's Ministry of Culture and Tourism"}].map(e=>Object.freeze(e))),e.FrontendDescs,e.GET_FRONTEND_DESC_BY_ID=function(t){const s=e.FrontendDescs.find(e=>e.id===t);if(!s)throw new Error(`Frontend descriptor of language with id "${t}" not found.`);return s}}(a=t.Lang||(t.Lang={})),Object.freeze(a),Object.freeze(a.prototype)},function(e,t,s){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){let t,s,r,a;!function(e){e.SERVER="SERVER",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(t=e.Type||(e.Type={})),function(e){e.EVENT_NAME="game-create"}(s=e.CtorArgs||(e.CtorArgs={})),function(e){e.EVENT_NAME="game-reset"}(r=e.Serialization||(e.Serialization={})),function(e){e.PLAYING="PLAYING",e.PAUSED="PAUSED",e.OVER="OVER"}(a=e.Status||(e.Status={})),e.K=Object.freeze({HEALTH_UPDATE_CHANCE:.1,PCT_MOVES_THAT_ARE_BOOST:.05,HEALTH_EFFECT_FOR_DOWNED_PLAYER:.6,EVENT_RECORD_WRAPPING_BUFFER_LENGTH:128,EVENT_RECORD_FORWARD_WINDOW_LENGTH:64})}(r=t.Game||(t.Game={})),Object.freeze(r)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),a=s(25);class n extends r.Lang{constructor(e,t){if(super(),this.static=e,this.treeMap=a.LangSeqTreeNode.CREATE_TREE_MAP(t),this.leafNodes=this.treeMap.getLeafNodes(),this.leafNodes.length!==this.static.frontend.numLeaves)throw new Error(`maintenance required: the frontend constant for the language "${this.static.frontend.id}" needs to be updated to the correct, computed value, which is \`${this.leafNodes.length}\`.`)}get numLeaves(){return this.leafNodes.length}reset(){this.treeMap.reset()}getNonConflictingChar(e,t){this.leafNodes.sort(a.LangSeqTreeNode.LEAF_CMP[t]);let s=void 0;for(const r of this.leafNodes){const n=r.andNonRootParents();for(let t=0;t<n.length;t++){const s=e.find(e=>e.startsWith(n[t].sequence));if(s){s===n[t].sequence?n.splice(0):n.splice(t);break}}if(n.length){n.sort(a.LangSeqTreeNode.PATH_CMP[t]),s=n[0];break}}if(!s)throw new Error("Invariants guaranteeing that a LangSeq canalways be shuffled-in were not met.");return s.chooseOnePair(t)}simpleView(){return Object.assign(Object.create(null),{id:this.static.frontend.id,displayName:this.static.frontend.display,root:this.treeMap.simpleView(),numLeaves:this.leafNodes.length})}}t.Lang=n,n=t.Lang||(t.Lang={}),Object.freeze(n),Object.freeze(n.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),a=s(7),n=s(21);t.PlayerSkeleton=n.PlayerSkeleton;const i=s(22);t.PlayerStatus=i.PlayerStatus;const o=s(8);t.Team=o.Team;class c extends n.PlayerSkeleton{constructor(e,t){if(super(e,t),!c.Username.REGEXP.test(t.username))throw new RangeError(`Username "${t.username}" does not match the required regular expression, "${c.Username.REGEXP.source}".`);this.familyId=t.familyId,this.teamId=t.teamId,this.username=t.username}reset(e){super.reset(e),this.status.reset(),this.lastAcceptedRequestId=a.PlayerActionEvent.INITIAL_REQUEST_ID,this.requestInFlight=!1}__abstractNotifyThatGameStatusBecamePlaying(){}__abstractNotifyThatGameStatusBecamePaused(){}__abstractNotifyThatGameStatusBecameOver(){}makeMovementRequest(e,t){if(this.game.status!==r.Game.Status.PLAYING)throw new Error("This is not a necessary precondition, but we're doing it anyway.");if(this.requestInFlight)throw new Error("Only one request should ever be in flight at a time.");this.requestInFlight=!0,this.game.processMoveRequest(new a.PlayerActionEvent.Movement(this.playerId,this.lastAcceptedRequestId,e,t))}get team(){return this.game.teams[this.teamId]}isTeamedWith(e){return this.team.members.includes(e)}}t.Player=c,function(e){let t,s;!function(e){e.REGEXP=/[a-zA-Z](?:[ ]?[a-zA-Z0-9:-]+?){4,}/}(t=e.Username||(e.Username={})),function(e){e.finalize=e=>{const t=Array.from(new Set(e.map(e=>e.teamId))).sort((e,t)=>e-t).reduce((e,t,s)=>(e[t]=s,e),[]);return e.slice().sort((e,s)=>t[e.teamId]-t[s.teamId]).map((e,s)=>Object.assign(e,{playerId:s,teamId:t[e.teamId]}))}}(s=e.CtorArgs||(e.CtorArgs={})),Object.freeze(s)}(c=t.Player||(t.Player={})),Object.freeze(c),Object.freeze(c.prototype)},function(e,t,s){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EVENT_ID_REJECT=-1}(r=t.EventRecordEntry||(t.EventRecordEntry={})),Object.freeze(r)},function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(a,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=s(17),n=s(1),i=s(18),o=s(20),c=s(3),h=s(23),l=s(4),u=s(7),d=s(24);class m extends d.GameManager{constructor(e,t){super(n.Game.Type.SERVER,{tileClass:i.Tile,playerStatusCtor:c.PlayerStatus},t),this.namespace=e;{const e={};t.playerDescs.forEach(t=>{if(t.familyId===c.Player.Family.HUMAN&&!t.socketId)throw new Error;e[t.playerId]=this.namespace.sockets[t.socketId]}),this.playerSockets=e}const s=this.players.filter(e=>e.familyId===c.Player.Family.HUMAN);s.map(e=>this.playerSockets[e.playerId]).forEach(e=>{e.removeAllListeners(u.PlayerActionEvent.EVENT_NAME.Movement),e.on(u.PlayerActionEvent.EVENT_NAME.Movement,this.processMoveRequest),e.removeAllListeners(u.PlayerActionEvent.EVENT_NAME.Bubble),e.on(u.PlayerActionEvent.EVENT_NAME.Bubble,this.processBubbleRequest)}),s.forEach(e=>{t.playerDescs.forEach(t=>{t.isALocalOperator=t.socketId===this.playerSockets[e.playerId].id}),this.playerSockets[e.playerId].emit(n.Game.CtorArgs.EVENT_NAME,t)},this)}__getGridImplementation(e){return o.Grid.getImplementation(e)}reset(){const e=Object.create(null,{reset:{get:()=>super.reset}});return r(this,void 0,void 0,(function*(){const t=e.reset.call(this);return this.namespace.emit(n.Game.Serialization.EVENT_NAME,this.serializeResetState()),t}))}__createOperatorPlayer(e){throw new TypeError("This should never be called for a ServerGame.")}__createArtifPlayer(e){return h.ArtificialPlayer.of(this,e)}setTimeout(e,t,...s){return a.setTimeout(e,t,s).unref()}cancelTimeout(e){clearTimeout(e)}executePlayerMoveEvent(e){super.executePlayerMoveEvent(e),e.eventId===l.EventRecordEntry.EVENT_ID_REJECT?this.playerSockets[e.playerId].emit(u.PlayerActionEvent.EVENT_NAME.Movement,e):this.namespace.emit(u.PlayerActionEvent.EVENT_NAME.Movement,e)}executePlayerBubbleEvent(e){super.executePlayerBubbleEvent(e),e.eventId===l.EventRecordEntry.EVENT_ID_REJECT?this.playerSockets[e.playerId].emit(u.PlayerActionEvent.EVENT_NAME.Bubble,e):this.namespace.emit(u.PlayerActionEvent.EVENT_NAME.Bubble,e)}}t.ServerGame=m,Object.freeze(m),Object.freeze(m.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.source=e}at(...e){return this.source.__getTileAt(...e)}destsFrom(...e){return new a(this.source.__getTileDestsFrom(...e))}sourcesTo(...e){return new a(this.source.__getTileSourcesTo(...e))}}t.TileGetter=r,Object.freeze(r),Object.freeze(r.prototype);class a{constructor(e){this.contents=e}get occupied(){return this.contents=this.contents.filter(e=>e.isOccupied),this}get unoccupied(){return this.contents=this.contents.filter(e=>!e.isOccupied),this}get get(){return this.contents}}Object.freeze(a),Object.freeze(a.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(4);var a;!function(e){e.INITIAL_REQUEST_ID=-1,e.EVENT_NAME=Object.freeze({Bubble:"player-bubble",Movement:"player-movement"});class t{constructor(e,t){this.eventId=r.EventRecordEntry.EVENT_ID_REJECT,this.affectedNeighbours=void 0,this.playerId=e,this.playerLastAcceptedRequestId=t}}e.Bubble=t;e.Movement=class extends t{constructor(e,t,s,r){super(e,t),this.newPlayerHealth=void 0,this.tileHealthModDescs=void 0,this.destModDesc={coord:s.coord,lastKnownUpdateId:s.lastKnownUpdateId,newCharSeqPair:void 0,newFreeHealth:void 0},this.moveType=r}}}(a=t.PlayerActionEvent||(t.PlayerActionEvent={})),Object.freeze(a)},function(e,t,s){"use strict";var r,a=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){if(r.set(this,void 0),0===t.length)throw new Error("teams must have at least one member.");this.id=e,this.members=t,a(this,r,this.members.every(e=>e.status.noCheckGameOver)?i.ElimOrder.IMMORTAL:i.ElimOrder.STANDING)}reset(){this.elimOrder!==i.ElimOrder.IMMORTAL&&(this.elimOrder=i.ElimOrder.STANDING)}get elimOrder(){return n(this,r)}set elimOrder(e){if(this.elimOrder===i.ElimOrder.IMMORTAL)throw new Error("Cannot change the elimination status of an immortal team.");a(this,r,e)}}t.Team=i,r=new WeakMap,function(e){let t;!function(e){e.IMMORTAL=-1,e.STANDING=0}(t=e.ElimOrder||(e.ElimOrder={}))}(i=t.Team||(t.Team={})),Object.freeze(i),Object.freeze(i.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(10);t.server=new r.SnakeyServer},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(11),a=s(12),n=s(13),i=s(14),o=s(15),c=s(0),h=s(16);class l{constructor(e=l.DEFAULT_PORT,t){this.app=i(),this.http=n.createServer({},this.app),this.io=o(this.http);const s=a.resolve(__dirname,"../..");this.app.disable("x-powered-by"),this.app.get("/",(e,t)=>{t.sendFile(a.resolve(s,"index.html"))}),this.app.use("/dist",i.static(a.resolve(s,"dist"))),this.app.use("/assets",i.static(a.resolve(s,"assets"))),this.http.listen({port:e,host:t},()=>{const e=this.http.address();console.log(`Server mounted to: \`${e.family}${e.address}${e.port}\`.`)}),this.io.of(c.SnakeyNsps.HOST_REGISTRATION).on("connection",this.onHostsConnection.bind(this))}onHostsConnection(e){e.on(h.GroupSession.CtorArgs.EVENT_NAME,t=>{const s=this.createUniqueSessionName(t.groupName);if(!s)return void e.emit(h.GroupSession.CtorArgs.EVENT_NAME,new h.GroupSession.CtorArgs(""));t.groupName=s;const r=this.io.of(s);this.allGroupSessions.set(r.name,new h.GroupSession(r,()=>{this.allGroupSessions.delete(r.name)},t.initialTtl)),e.emit(h.GroupSession.CtorArgs.EVENT_NAME,t)})}createUniqueSessionName(e){if(!h.GroupSession.SessionName.REGEXP.test(e))return;const t=`${c.SnakeyNsps.GROUP_PREFIX}/${e}`;return this.allGroupSessions.has(t)?void 0:t}}t.SnakeyServer=l,function(e){e.DEFAULT_PORT=8080,e.chooseIPv4Address=()=>Object.values(r.networkInterfaces()).flat().filter(e=>!e.internal&&"IPv4"===e.family).map(e=>e.address)}(l=t.SnakeyServer||(t.SnakeyServer={})),Object.freeze(l),Object.freeze(l.prototype)},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("socket.io")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5);var a=s(5);t.ServerGame=a.ServerGame;class n{constructor(e,t,s){this.namespace=e,this.currentGame=void 0,this.initialTtlTimeout=setTimeout(()=>{0===Object.keys(this.namespace.connected).length&&this.terminate()},1e3*s).unref(),this.deleteExternalRefs=t,this.namespace.on("connection",this.onConnection)}onConnection(e){console.log("A user has connected."),e.join(n.RoomNames.MAIN),e.teamId=void 0,e.updateId=0,0===Object.keys(this.namespace.connected).length&&(clearTimeout(this.initialTtlTimeout),this.sessionHost=e),e.on("disconnect",(...t)=>{e===this.sessionHost&&this.terminate()})}terminate(){delete this.currentGame;const e=this.namespace;e.removeAllListeners("connect"),e.removeAllListeners("connection"),Object.values(e.connected).forEach(e=>{e.disconnect()}),e.removeAllListeners(),delete e.server.nsps[e.name],this.deleteExternalRefs()}createGameInstance(e,t){const s={undefinedUsername:Object.values(this.sockets).filter(e=>!e.username).map(e=>e.id),undefinedTeamId:Object.values(this.sockets).filter(e=>!e.teamId).map(e=>e.id)};if(s.undefinedUsername.length||s.undefinedTeamId.length)return s;this.currentGame=new r.ServerGame(this.namespace,{coordSys:e,gridDimensions:t,averageFreeHealthPerTile:void 0,langId:void 0,langBalancingScheme:void 0,playerDescs:Object.assign({},Object.values(this.sockets).map(e=>({isALocalOperator:!1,familyId:"HUMAN",teamId:e.teamId,socketId:e.id,username:e.username,noCheckGameOver:!1,familyArgs:{}})))})}get sockets(){return this.namespace.sockets}}t.GroupSession=n,function(e){let t,s;!function(e){e.REGEXP=/[a-zA-Z](?:[a-zA-Z0-9:-]+?){4,}/}(t=e.SessionName||(e.SessionName={})),function(e){e.MAIN="main"}(s=e.RoomNames||(e.RoomNames={}));class r{constructor(e,t=r.DEFAULT_INITIAL_TTL){this.groupName=e,this.initialTtl=t}}r.EVENT_NAME="group-session-create",r.DEFAULT_INITIAL_TTL=60,e.CtorArgs=r}(n=t.GroupSession||(t.GroupSession={})),Object.freeze(n),Object.freeze(n.prototype)},function(e,t){e.exports=require("timers")},function(e,t,s){"use strict";var r,a,n,i,o=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const h=s(0),l=s(19);t.Coord=l.Coord;class u{constructor(e){r.set(this,void 0),a.set(this,void 0),n.set(this,void 0),i.set(this,void 0),this.coord=e,o(this,r,h.Player.Id.NULL)}reset(){this.evictOccupant(),this.lastKnownUpdateId=0,this.freeHealth=0,this.setLangCharSeqPair(h.Lang.CharSeqPair.NULL)}__setOccupant(e,t){o(this,r,e)}get isOccupied(){return this.occupantId!==h.Player.Id.NULL}evictOccupant(){o(this,r,h.Player.Id.NULL)}get occupantId(){return c(this,r)}get freeHealth(){return c(this,a)}set freeHealth(e){o(this,a,e)}setLangCharSeqPair(e){o(this,n,e.char),o(this,i,e.seq)}get langChar(){return c(this,n)}get langSeq(){return c(this,i)}}t.Tile=u,r=new WeakMap,a=new WeakMap,n=new WeakMap,i=new WeakMap,Object.freeze(u),Object.freeze(u.prototype)},function(e,t,s){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){let t;!function(e){e.EUCLID2="EUCLID2",e.BEEHIVE="BEEHIVE"}(t=e.System||(e.System={}));class s{constructor(e){}}e.Abstract=s,function(t){class s extends e.Abstract{}t.Mathy=s}(s=e.Abstract||(e.Abstract={})),Object.freeze(s),Object.freeze(s.prototype)}(r=t.Coord||(t.Coord={})),Object.freeze(r)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(6);class a{constructor(e){this.static=e.gridClass,this.dimensions=e.dimensions,this.tile=new r.TileGetter(this)}get area(){return this.static.getArea(this.dimensions)}reset(){this.forEachTile(e=>e.reset())}check(){}getRandomCoord(){return this.static.getRandomCoord(this.dimensions)}}t.Grid=a,function(e){e.getImplementation=t=>e.__Constructors[t]}(a=t.Grid||(t.Grid={}))},function(e,t,s){"use strict";var r,a=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(0),o=s(1),c=s(6);class h extends i.Player{constructor(e,t){if(super(),r.set(this,void 0),Math.trunc(t.playerId)!==t.playerId)throw new RangeError("Player ID's must be integer values.");this.playerId=t.playerId,this.isALocalOperator=t.isALocalOperator,this.game=e,this.status=new this.game.__playerStatusCtor(this,t.noCheckGameOver),this.tile=new c.TileGetter(new h.TileGetterSource(this))}__afterAllPlayersConstruction(){this.status.__afterAllPlayersConstruction()}reset(e){a(this,r,e),this.hostTile.__setOccupant(this.playerId,this.status.immigrantInfo)}get coord(){return this.hostTile.coord}get hostTile(){return n(this,r)}onGoBesideOtherPlayer(){}moveTo(e){if(this.hostTile.occupantId!==this.playerId){if(this.game.gameType!==o.Game.Type.ONLINE)throw new Error("Linkage between player and occupied tile disagrees.")}else this.hostTile.evictOccupant();if(e.isOccupied){if(this.game.gameType!==o.Game.Type.ONLINE)throw new Error("Only one player can occupy a tile at a time.")}else a(this,r,e),e.__setOccupant(this.playerId,this.status.immigrantInfo)}}t.PlayerSkeleton=h,r=new WeakMap,function(e){class t{constructor(e){this.player=e}__getTileAt(){return this.player.game.grid.tile.at(this.player.coord)}__getTileDestsFrom(){return this.player.game.grid.tile.destsFrom(this.player.coord).get}__getTileSourcesTo(){return this.player.game.grid.tile.sourcesTo(this.player.coord).get}}e.TileGetterSource=t,Object.freeze(t),Object.freeze(t.prototype)}(h=t.PlayerSkeleton||(t.PlayerSkeleton={})),Object.freeze(h),Object.freeze(h.prototype)},function(e,t,s){"use strict";var r,a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=s(8);class o{constructor(e,t){r.set(this,void 0),this.player=e,this.noCheckGameOver=t}reset(){this.health=0}__afterAllPlayersConstruction(){}get immigrantInfo(){}get health(){return a(this,r)}set health(e){const t=this.isDowned;if(n(this,r,e),t||!this.isDowned||this.noCheckGameOver)return;const s=this.player.team,a=this.player.game.teams;if(s.elimOrder===i.Team.ElimOrder.STANDING&&s.members.every(e=>e.status.noCheckGameOver||e.status.isDowned)){const e=1+a.filter(e=>e.elimOrder!==i.Team.ElimOrder.STANDING).length;s.elimOrder=1+a.filter(e=>e.elimOrder!==i.Team.ElimOrder.STANDING&&e.elimOrder!==i.Team.ElimOrder.IMMORTAL).length,e===a.length&&this.player.game.statusBecomeOver()}}get isDowned(){return this.health<0}}t.PlayerStatus=o,r=new WeakMap,Object.freeze(o),Object.freeze(o.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),a=s(3);class n extends a.Player{constructor(e,t){if(super(e,t),e.gameType===r.Game.Type.ONLINE)throw new TypeError("OnlineGames should be using regular Players instead.")}__abstractNotifyThatGameStatusBecamePlaying(){this.movementContinueWithInitialDelay()}__abstractNotifyThatGameStatusBecamePaused(){this.game.cancelTimeout(this.scheduledMovementCallbackId),this.scheduledMovementCallbackId=void 0}__abstractNotifyThatGameStatusBecameOver(){this.game.cancelTimeout(this.scheduledMovementCallbackId),this.scheduledMovementCallbackId=void 0}movementContinue(){this.makeMovementRequest(this.game.grid.getUntToward(this.coord,this.computeDesiredDestination()),this.getNextMoveType()),this.movementContinueWithInitialDelay()}movementContinueWithInitialDelay(){this.scheduledMovementCallbackId=this.game.setTimeout(()=>this.movementContinue(),this.computeNextMovementTimer())}}t.ArtificialPlayer=n,function(e){e.of=(t,s)=>{const r=s.familyId;return new e.__Constructors[r](t,s)}}(n=t.ArtificialPlayer||(t.ArtificialPlayer={}))},function(e,t,s){"use strict";var r,a,n,i=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(a,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},c=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const h=s(2),l=s(1),u=s(3),d=s(26),m=s(28);class p extends d.GameEvents{constructor(e,t,i){super(e,t,i),r.set(this,void 0),a.set(this,void 0),n.set(this,void 0),this.averageFreeHealth=i.averageFreeHealthPerTile*this.grid.area,this.averageFreeHealthPerTile=i.averageFreeHealthPerTile,o(this,a,new Set),o(this,n,Promise.resolve().then(()=>s(29)(`./${this.langFrontend.module}.ts`)).then(e=>{this.lang=e[this.langFrontend.module][this.langFrontend.export].getInstance();const t=this.grid.static.getAmbiguityThreshold();if(this.lang.numLeaves<t)throw new Error(`Found ${this.lang.numLeaves} leaves, but at least ${t} were required. The provided mappings composing the current Lang-under-construction are not sufficient to ensure that a shuffling operation will always be able to find a safe candidate to use as a replacement. Please see the spec for Lang.getNonConflictingChar.`);return this.lang})),this.langBalancingScheme=i.langBalancingScheme,this.scoreInfo=new m.ScoreInfo(this.players.map(e=>e.playerId))}reset(){const e=Object.create(null,{reset:{get:()=>super.reset}});return i(this,void 0,void 0,(function*(){yield e.reset.call(this),o(this,r,0),c(this,a).clear(),yield c(this,n),this.lang.reset(),this.grid.forEachTile(e=>{e.setLangCharSeqPair(this.dryRunShuffleLangCharSeqAt(e))}),this.teams.forEach(e=>e.reset());const t=this.grid.static.getSpawnCoords(this.teams.map(e=>e.members.length),this.grid.dimensions);return this.teams.forEach((e,s)=>{e.members.forEach((e,r)=>{e.reset(this.grid.tile.at(t[s][r]))})}),this.scoreInfo.reset(),Promise.resolve()}))}dryRunShuffleLangCharSeqAt(e){e.setLangCharSeqPair(h.Lang.CharSeqPair.NULL);const t=Array.from(new Set(this.grid.tile.sourcesTo(e.coord).get.flatMap(e=>this.grid.tile.destsFrom(e.coord).get)));return this.lang.getNonConflictingChar(t.map(e=>e.langSeq).filter(e=>e),this.langBalancingScheme)}get currentFreeHealth(){return c(this,r)}get freeHealthTiles(){return c(this,a)}dryRunSpawnFreeHealth(e){let t=this.averageFreeHealth-this.currentFreeHealth;if(t<=0)return;const s=[];for(;t>0;){let r;do{r=this.grid.tile.at(this.grid.getRandomCoord())}while(r.isOccupied||s.find(e=>r.coord.equals(e.coord)));const a=1;if(Math.random()<l.Game.K.HEALTH_UPDATE_CHANCE){let t;(t=e.find(e=>r.coord.equals(e.coord)))?t.newFreeHealth=(t.newFreeHealth||0)+a:s.push({coord:r.coord,lastKnownUpdateId:1+r.lastKnownUpdateId,newCharSeqPair:void 0,newFreeHealth:r.freeHealth+a})}t-=a}return s}getHealthCostOfBoost(){return this.averageFreeHealthPerTile/l.Game.K.PCT_MOVES_THAT_ARE_BOOST}executeTileModEvent(e,t=!0){Object.freeze(e);const s=this.grid.tile.at(e.coord);if(e.lastKnownUpdateId!==1+s.lastKnownUpdateId)throw new Error("this never happens. see comment in source.");return o(this,r,c(this,r)+(e.newFreeHealth-s.freeHealth)),0===e.newFreeHealth?c(this,a).delete(s):c(this,a).add(s),super.executeTileModEvent(e,t),s}managerCheckGamePlayingRequest(e){if(this.status!==l.Game.Status.PLAYING)return;const t=this.players[e.playerId];if(!t)throw new Error("No such player exists.");if(e.playerLastAcceptedRequestId!==t.lastAcceptedRequestId)throw new RangeError(e.playerLastAcceptedRequestId<t.lastAcceptedRequestId?"Clients should not make requests until they have received my response to their last request.":"Client seems to have incremented the request ID counter on their own, which is is illegal.");return t}processMoveRequest(e){const t=this.managerCheckGamePlayingRequest(e);if(!t)return void this.executePlayerMoveEvent(e);const s=this.grid.tile.at(e.destModDesc.coord);if(s.isOccupied||s.lastKnownUpdateId!==e.destModDesc.lastKnownUpdateId)return void this.executePlayerMoveEvent(e);const r=t.status.health+s.freeHealth*(t.status.isDowned?l.Game.K.HEALTH_EFFECT_FOR_DOWNED_PLAYER:1)-(e.moveType===u.Player.MoveType.BOOST?this.getHealthCostOfBoost():0);if(r<0)return void this.executePlayerMoveEvent(e);const a=this.scoreInfo.entries[t.playerId];a.totalHealthPickedUp+=s.freeHealth,a.moveCounts[e.moveType]+=1,e.playerLastAcceptedRequestId=1+t.lastAcceptedRequestId,e.newPlayerHealth={health:r},e.destModDesc.lastKnownUpdateId=1+s.lastKnownUpdateId,e.destModDesc.newFreeHealth=0,e.destModDesc.newCharSeqPair=this.dryRunShuffleLangCharSeqAt(s),e.tileHealthModDescs=this.dryRunSpawnFreeHealth([e.destModDesc]),e.eventId=this.nextUnusedEventId,this.executePlayerMoveEvent(e)}processPlayerContact(e){}processBubbleRequest(e){const t=this.managerCheckGamePlayingRequest(e);t?(e.playerLastAcceptedRequestId=1+t.lastAcceptedRequestId,e.eventId=this.nextUnusedEventId,this.executePlayerBubbleEvent(e)):this.executePlayerBubbleEvent(e)}}t.GameManager=p,r=new WeakMap,a=new WeakMap,n=new WeakMap,Object.freeze(p),Object.freeze(p.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class a{constructor(e,t,s){this.sequence=t,this.characters=s,this.parent=e,this.children=[]}static CREATE_TREE_MAP(e){const t=new Map;for(const s in e){const r=e[s].seq,a=new n(s,e[s].weight),i=t.get(r);i?i.push(a):t.set(r,[a])}const s=new a.Root;return Array.from(t).sort((e,t)=>e[0].length-t[0].length).forEach(e=>{s.addCharMapping(...e)}),s.finalize(),s}finalize(){this.validateConstruction(),Object.freeze(this.characters),Object.freeze(this.children),this.children.forEach(e=>e.finalize())}validateConstruction(){if(!this.sequence.startsWith(this.parent.sequence))throw new Error("Child node's sequence must start with that of its parent.")}reset(){this.children.forEach(e=>e.reset()),this.inheritingHitCount=0,this.inheritingWeightedHitCount=0,this.characters.forEach(e=>{e.reset();for(let t=0;t<10*Math.random();t++)this.incrementNumHits(e)})}addCharMapping(e,t){if(!r.Lang.Seq.REGEXP.test(e))throw new RangeError(`Mapping-sequence "${e}" did not match the required regular expression "${r.Lang.Seq.REGEXP.source}".`);if(0===t.length)throw new Error("Must not make mapping without written characters.");let s=this;{let t=this;for(;t;)s=t,t=t.children.find(t=>e.startsWith(t.sequence))}if(s.sequence===e)throw new Error(`Mappings for all written-characters with a commoncorresponding typeable-sequence should be registered together,but an existing mapping for the sequence "${e}" was found.`);s.children.push(new a(s,e,t))}chooseOnePair(e){const t=this.characters.slice(0).sort(n.CMP[e]).shift(),s={char:t.char,seq:this.sequence};return this.incrementNumHits(t),s}incrementNumHits(e){e.incrementNumHits(),this.__recursiveIncrementNumHits(e.weightInv)}__recursiveIncrementNumHits(e){this.inheritingHitCount+=1,this.inheritingWeightedHitCount+=e,this.children.forEach(t=>t.__recursiveIncrementNumHits(e))}get personalHitCount(){return this.inheritingHitCount-this.parent.inheritingHitCount}get averageCharHitCount(){return this.characters.reduce((e,t)=>e+t.hitCount,0)/this.characters.length}get personalWeightedHitCount(){return this.inheritingWeightedHitCount-this.parent.inheritingWeightedHitCount}andNonRootParents(){const e=[];let t=this;for(;t.parent;)e.push(t),t=t.parent;return e}getLeafNodes(){const e=[];return this.__recursiveGetLeafNodes(e),e}__recursiveGetLeafNodes(e){this.children.length?this.children.forEach(t=>{t.__recursiveGetLeafNodes(e)}):e.push(this)}simpleView(){let e=this.characters.map(e=>e.simpleView());return Object.assign(Object.create(null),{seq:this.sequence,chars:1===e.length?e[0]:e,hits:this.personalHitCount,kids:this.children.map(e=>e.simpleView()),__proto__:void 0})}}t.LangSeqTreeNode=a,a.LEAF_CMP=Object.freeze({[r.Lang.BalancingScheme.SEQ]:(e,t)=>e.inheritingHitCount-t.inheritingHitCount,[r.Lang.BalancingScheme.CHAR]:(e,t)=>e.inheritingHitCount-t.inheritingHitCount,[r.Lang.BalancingScheme.WEIGHT]:(e,t)=>e.inheritingWeightedHitCount-t.inheritingWeightedHitCount}),a.PATH_CMP=Object.freeze({[r.Lang.BalancingScheme.SEQ]:(e,t)=>e.personalHitCount-t.personalHitCount,[r.Lang.BalancingScheme.CHAR]:(e,t)=>e.averageCharHitCount-t.averageCharHitCount,[r.Lang.BalancingScheme.WEIGHT]:(e,t)=>e.personalWeightedHitCount-t.personalWeightedHitCount}),function(e){e.Root=class extends e{constructor(){super(void 0,"",[])}validateConstruction(){}chooseOnePair(e){throw new TypeError("Must never hit on the root.")}get personalHitCount(){throw new TypeError("Must never hit on the root.")}get personalWeightedHitCount(){throw new TypeError("Must never hit on the root.")}andNonRootParents(){throw new TypeError}simpleView(){return this.children.map(e=>e.simpleView())}}}(a=t.LangSeqTreeNode||(t.LangSeqTreeNode={})),Object.freeze(a),Object.freeze(a.prototype);class n{constructor(e,t){if(t<=0)throw new RangeError(`All weights must be positive, but we were passed the value "${t}" for the character "${e}".`);this.char=e,this.weightInv=1/t}reset(){this.hitCount=0,this.weightedHitCount=0}incrementNumHits(){this.hitCount+=1,this.weightedHitCount+=this.weightInv}simpleView(){return Object.assign(Object.create(null),{char:this.char,hits:this.hitCount})}}n.CMP=Object.freeze({[r.Lang.BalancingScheme.SEQ]:(e,t)=>e.hitCount-t.hitCount,[r.Lang.BalancingScheme.CHAR]:(e,t)=>e.hitCount-t.hitCount,[r.Lang.BalancingScheme.WEIGHT]:(e,t)=>e.weightedHitCount-t.weightedHitCount}),Object.freeze(n),Object.freeze(n.prototype)},function(e,t,s){"use strict";var r,a=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),o=s(4),c=s(27);class h extends c.GameBase{constructor(e,t,s){super(e,t,s),r.set(this,void 0),this.eventRecordBitmap=[]}reset(){const e=super.reset();return this.eventRecordBitmap.fill(!1,0,i.Game.K.EVENT_RECORD_WRAPPING_BUFFER_LENGTH),a(this,r,0),e}get nextUnusedEventId(){return n(this,r)}recordEvent(e){const t=e.eventId,s=t%i.Game.K.EVENT_RECORD_WRAPPING_BUFFER_LENGTH;if(t===o.EventRecordEntry.EVENT_ID_REJECT)throw new TypeError("Do not try to record events for rejected requests.");if(t<0||t!==Math.trunc(t))throw new RangeError("Event ID's must only be assigned positive, integer values.");if(this.eventRecordBitmap[s])throw new Error("Event ID's must be assigned unique values.");this.eventRecordBitmap[s]=!0,this.eventRecordBitmap[(t+i.Game.K.EVENT_RECORD_WRAPPING_BUFFER_LENGTH-i.Game.K.EVENT_RECORD_FORWARD_WINDOW_LENGTH)%i.Game.K.EVENT_RECORD_WRAPPING_BUFFER_LENGTH]=!1,a(this,r,+n(this,r)+1)}executeTileModEvent(e,t=!0){Object.freeze(e);const s=this.grid.tile.at(e.coord);if(s.lastKnownUpdateId>e.lastKnownUpdateId)return s;if(s.lastKnownUpdateId===e.lastKnownUpdateId)throw new Error("never.");return e.newCharSeqPair&&(s.setLangCharSeqPair(e.newCharSeqPair),t&&this.operators.filter(e=>e.tile.destsFrom().get.includes(s)).forEach(e=>e.seqBufferAcceptKey(""))),s.lastKnownUpdateId=e.lastKnownUpdateId,s.freeHealth=e.newFreeHealth,s}executePlayerMoveEvent(e){var t;const s=this.players[e.playerId],r=e.playerLastAcceptedRequestId-s.lastAcceptedRequestId;if(e.eventId===o.EventRecordEntry.EVENT_ID_REJECT)return void(0===r&&(s.requestInFlight=!1));this.recordEvent(e);const a=this.executeTileModEvent(e.destModDesc,s!==this.currentOperator);if(null===(t=e.tileHealthModDescs)||void 0===t||t.forEach(e=>{this.executeTileModEvent(e)}),r>1){if(s===this.currentOperator)throw new Error("This never happens. See comment in source.")}else{if(s.requestInFlight=!1,!(s===this.currentOperator?1===r:r<=1))throw new Error("This never happens. See comment in source");s.status.health=e.newPlayerHealth.health,s.moveTo(a),s.lastAcceptedRequestId=e.playerLastAcceptedRequestId}}executePlayerBubbleEvent(e){this.players[e.playerId].requestInFlight=!1,e.eventId!==o.EventRecordEntry.EVENT_ID_REJECT&&this.recordEvent(e)}}t.GameEvents=h,r=new WeakMap,Object.freeze(h),Object.freeze(h.prototype)},function(e,t,s){"use strict";var r,a,n=this&&this.__classPrivateFieldSet||function(e,t,s){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,s),s},i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const o=s(1),c=s(0),h=s(3);class l{constructor(e,t,s){r.set(this,void 0),a.set(this,void 0),this.gameType=e;const n=this.__getGridImplementation(s.coordSys);if(this.grid=new n({gridClass:n,tileClass:t.tileClass,coordSys:s.coordSys,dimensions:s.gridDimensions}),this.langFrontend=c.Lang.GET_FRONTEND_DESC_BY_ID(s.langId),this.__playerStatusCtor=t.playerStatusCtor,this.players=this.createPlayers(s),this.operators=this.players.filter(e=>e.isALocalOperator),this.currentOperator=this.operators[0],this.operators.some(e=>e.teamId!==this.operators[0].teamId))throw new Error("All local operators must be on the same team.");{const e=[];if(this.players.forEach(t=>{e[t.teamId]||(e[t.teamId]=[]),e[t.teamId].push(t)}),this.teams=e.map((e,t)=>new h.Team(t,e)),this.teams.every(e=>e.id===h.Team.ElimOrder.IMMORTAL))throw new Error("All teams are immortal. The game will never end.")}this.players.forEach(e=>e.__afterAllPlayersConstruction())}reset(){return this.grid.reset(),n(this,a,o.Game.Status.PAUSED),Promise.resolve()}createPlayers(e){const t=e.playerDescs=this.gameType===o.Game.Type.ONLINE?e.playerDescs:h.Player.CtorArgs.finalize(e.playerDescs);return Object.freeze(t.map(e=>e.familyId===h.Player.Family.HUMAN?e.isALocalOperator?this.__createOperatorPlayer(e):new h.Player(this,e):this.__createArtifPlayer(e)))}serializeResetState(){const e=[],t=this.players.map(e=>e.coord),s=[];return this.grid.forEachTile(t=>{e.push({char:t.langChar,seq:t.langSeq}),t.freeHealth&&s.push({coord:t.coord,health:t.freeHealth})}),{csps:e,playerCoords:t,healthCoords:s}}deserializeResetState(e){{let t=0;this.grid.forEachTile(s=>{s.setLangCharSeqPair(e.csps[t++]),s.lastKnownUpdateId=1})}e.playerCoords.forEach((e,t)=>{this.players[t].moveTo(this.grid.tile.at(e))}),e.healthCoords.forEach(e=>{this.grid.tile.at(e.coord).freeHealth=e.health})}get currentOperator(){return i(this,r)}set currentOperator(e){e&&this.currentOperator!==e&&this.operators.includes(e)&&(n(this,r,e),e.__abstractNotifyBecomeCurrent())}get status(){return i(this,a)}statusBecomePlaying(){if(this.status!==o.Game.Status.PLAYING){if(this.status!==o.Game.Status.PAUSED)throw new Error("Can only resume a game that is currently paused.");this.players.forEach(e=>{e.__abstractNotifyThatGameStatusBecamePlaying()}),this.__abstractStatusBecomePlaying(),n(this,a,o.Game.Status.PLAYING)}else console.log("[statusBecomePlaying]: Game is already playing")}statusBecomePaused(){if(this.status!==o.Game.Status.PAUSED){if(this.status!==o.Game.Status.PLAYING)throw new Error("Can only pause a game that is currently playing.");this.players.forEach(e=>{e.__abstractNotifyThatGameStatusBecamePaused()}),this.__abstractStatusBecomePaused(),n(this,a,o.Game.Status.PAUSED)}else console.log("[statusBecomePaused]: Game is already paused")}statusBecomeOver(){if(this.status!==o.Game.Status.PLAYING)throw new Error("Can only end a game that is currently playing.");this.players.forEach(e=>{e.__abstractNotifyThatGameStatusBecameOver()}),this.__abstractStatusBecomeOver(),n(this,a,o.Game.Status.OVER),console.log("game is over!")}__abstractStatusBecomePlaying(){}__abstractStatusBecomePaused(){}__abstractStatusBecomeOver(){}}t.GameBase=l,r=new WeakMap,a=new WeakMap,Object.freeze(l),Object.freeze(l.prototype)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class a{constructor(e){const t=[];for(const s of e)t[s]=new a.Entry;this.entries=t}reset(){for(const e of this.entries)e.reset()}}t.ScoreInfo=a,function(e){class t{constructor(){this.moveCounts={}}reset(){this.totalHealthPickedUp=0,Object.getOwnPropertyNames(r.Player.MoveType).forEach(e=>{this.moveCounts[e]=0})}}e.Entry=t,Object.freeze(t),Object.freeze(t.prototype)}(a=t.ScoreInfo||(t.ScoreInfo={})),Object.freeze(a),Object.freeze(a.prototype)},function(e,t,s){var r={"./Emote.ts":30,"./English.ts":31,"./Japanese.ts":32,"./Korean.ts":33,"./Morse.ts":34};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=29},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2);var a;!function(e){class t extends r.Lang{}e.GitHub=t,Object.freeze(t),Object.freeze(t.prototype)}(a=t.Emote||(t.Emote={})),Object.freeze(a)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2);var a;!function(e){class t extends r.Lang{constructor(){super(t,Object.entries(a).reduce((e,t)=>{const s=t[0],r=t[0],a=t[1];return e[s]={seq:r,weight:a},e},{}))}static getInstance(){return this.SINGLETON||(this.SINGLETON=new t),this.SINGLETON}}t.SINGLETON=void 0,t.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("engl-low"),e.Lowercase=t,Object.seal(t),Object.freeze(t.prototype);class s extends r.Lang{constructor(){let e={};const t=t=>{e=Object.entries(a).reduce((e,s)=>{const r=t(s[0]),a=t(s[0]),n=s[1];return e[r]={seq:a,weight:n},e},e)};t(e=>e.toLowerCase()),t(e=>e.toUpperCase()),super(s,e)}static getInstance(){return this.SINGLETON||(this.SINGLETON=new s),this.SINGLETON}}s.SINGLETON=void 0,s.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("engl-mix"),e.MixedCase=s,Object.seal(s),Object.freeze(s.prototype);const a=Object.freeze({a:8.167,b:1.492,c:2.202,d:4.253,e:12.702,f:2.228,g:2.015,h:6.094,i:6.966,j:.153,k:1.292,l:4.025,m:2.406,n:6.749,o:7.507,p:1.929,q:.095,r:5.987,s:6.327,t:9.356,u:2.758,v:.978,w:2.56,x:.15,y:1.994,z:.077})}(a=t.English||(t.English={})),Object.seal(a)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2);var a;!function(e){class t extends r.Lang{constructor(){super(t,t.INITIALIZER)}static getInstance(){return this.SINGLETON||(this.SINGLETON=new t,this.INITIALIZER=void 0),this.SINGLETON}}t.SINGLETON=void 0,t.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("japn-hir"),t.INITIALIZER=Object.freeze({"の":{seq:"no",weight:1918313},"に":{seq:"ni",weight:1108840},"た":{seq:"ta",weight:1067566},"い":{seq:"i",weight:1060284},"は":{seq:"ha",weight:937811},"を":{seq:"wo",weight:936356},"と":{seq:"to",weight:927938},"る":{seq:"ru",weight:916652},"が":{seq:"ga",weight:860742},"し":{seq:"shi",weight:848132},"で":{seq:"de",weight:764834},"て":{seq:"te",weight:758316},"な":{seq:"na",weight:720156},"か":{seq:"ka",weight:537294},"れ":{seq:"re",weight:450805},"ら":{seq:"ra",weight:42329},"も":{seq:"mo",weight:396142},"う":{seq:"u",weight:352965},"す":{seq:"su",weight:340654},"り":{seq:"ri",weight:333999},"こ":{seq:"ko",weight:312227},"だ":{seq:"da",weight:280911},"ま":{seq:"ma",weight:278599},"さ":{seq:"sa",weight:258960},"き":{seq:"ki",weight:233505},"め":{seq:"me",weight:223806},"く":{seq:"ku",weight:221960},"あ":{seq:"a",weight:204256},"け":{seq:"ke",weight:199362},"ど":{seq:"do",weight:196555},"ん":{seq:"nn",weight:190068},"え":{seq:"e",weight:163664},"よ":{seq:"yo",weight:154206},"つ":{seq:"tsu",weight:153999},"や":{seq:"ya",weight:146156},"そ":{seq:"so",weight:131611},"わ":{seq:"wa",weight:123077},"ち":{seq:"chi",weight:99183},"み":{seq:"mi",weight:89264},"せ":{seq:"se",weight:83444},"ろ":{seq:"ro",weight:73467},"ば":{seq:"ba",weight:72228},"お":{seq:"o",weight:65870},"じ":{seq:"ji",weight:56857},"べ":{seq:"be",weight:56005},"ず":{seq:"zu",weight:53256},"げ":{seq:"ge",weight:49126},"ほ":{seq:"ho",weight:48752},"へ":{seq:"he",weight:47013},"び":{seq:"bi",weight:32312},"む":{seq:"mu",weight:31212},"ご":{seq:"go",weight:26965},"ね":{seq:"ne",weight:23490},"ぶ":{seq:"bu",weight:23280},"ぐ":{seq:"gu",weight:21549},"ぎ":{seq:"gi",weight:19865},"ひ":{seq:"hi",weight:19148},"ょ":{seq:"yo",weight:14425},"づ":{seq:"du",weight:13125},"ぼ":{seq:"bo",weight:12402},"ざ":{seq:"za",weight:12108},"ふ":{seq:"fu",weight:11606},"ゃ":{seq:"ya",weight:11522},"ぞ":{seq:"zo",weight:10047},"ゆ":{seq:"yu",weight:8486},"ぜ":{seq:"ze",weight:6893},"ぬ":{seq:"nu",weight:5124},"ぱ":{seq:"pa",weight:4349},"ゅ":{seq:"yu",weight:2755},"ぴ":{seq:"pi",weight:1608},"ぽ":{seq:"po",weight:1315},"ぷ":{seq:"pu",weight:986},"ぺ":{seq:"pe",weight:477},"ぢ":{seq:"di",weight:82}}),e.Hiragana=t,Object.seal(t),Object.freeze(t.prototype);class s extends r.Lang{constructor(){super(s,s.INITIALIZER)}static getInstance(){return this.SINGLETON||(this.SINGLETON=new s,this.INITIALIZER=void 0),this.SINGLETON}}s.SINGLETON=void 0,s.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("japn-kat"),s.INITIALIZER=Object.freeze({"ン":{seq:"nn",weight:290948},"ル":{seq:"ru",weight:189442},"ス":{seq:"su",weight:178214},"ト":{seq:"to",weight:162802},"ア":{seq:"a",weight:127845},"イ":{seq:"i",weight:120807},"ラ":{seq:"ra",weight:117203},"リ":{seq:"ri",weight:106744},"ク":{seq:"ku",weight:98209},"カ":{seq:"ka",weight:82982},"シ":{seq:"shi",weight:80626},"タ":{seq:"ta",weight:75319},"ロ":{seq:"ro",weight:75301},"ド":{seq:"do",weight:74257},"ジ":{seq:"ji",weight:61171},"フ":{seq:"fu",weight:61115},"レ":{seq:"re",weight:60608},"メ":{seq:"me",weight:60230},"コ":{seq:"ko",weight:58724},"マ":{seq:"ma",weight:56123},"プ":{seq:"pu",weight:54159},"テ":{seq:"te",weight:53404},"ム":{seq:"mu",weight:50758},"チ":{seq:"chi",weight:48437},"バ":{seq:"ba",weight:44970},"ビ":{seq:"bi",weight:44462},"グ":{seq:"gu",weight:40433},"キ":{seq:"ki",weight:39608},"ウ":{seq:"u",weight:39323},"サ":{seq:"sa",weight:39202},"ニ":{seq:"ni",weight:38711},"ナ":{seq:"na",weight:38047},"エ":{seq:"e",weight:36458},"ブ":{seq:"bu",weight:35920},"パ":{seq:"pa",weight:35416},"セ":{seq:"se",weight:34883},"オ":{seq:"o",weight:34718},"ィ":{seq:"i",weight:33747},"デ":{seq:"de",weight:32665},"ュ":{seq:"yu",weight:32616},"ミ":{seq:"mi",weight:29262},"ャ":{seq:"ya",weight:28144},"ボ":{seq:"bo",weight:26651},"ダ":{seq:"da",weight:26396},"ツ":{seq:"tsu",weight:24541},"ポ":{seq:"ho",weight:23742},"ベ":{seq:"be",weight:22755},"ネ":{seq:"ne",weight:22462},"ガ":{seq:"ga",weight:22061},"ハ":{seq:"ha",weight:21839},"ワ":{seq:"wa",weight:21784},"ソ":{seq:"so",weight:20784},"ケ":{seq:"ke",weight:20633},"モ":{seq:"ho",weight:20070},"ノ":{seq:"no",weight:19572},"ズ":{seq:"zu",weight:19240},"ピ":{seq:"pi",weight:18692},"ホ":{seq:"ho",weight:18204},"ェ":{seq:"e",weight:17817},"ョ":{seq:"yo",weight:17731},"ペ":{seq:"pe",weight:14881},"ゴ":{seq:"go",weight:13931},"ヤ":{seq:"ya",weight:12526},"ギ":{seq:"gi",weight:10732},"ヨ":{seq:"yo",weight:10318},"ザ":{seq:"za",weight:10144},"ァ":{seq:"a",weight:10121},"ゼ":{seq:"ze",weight:7689},"ヒ":{seq:"hi",weight:7289},"ヘ":{seq:"he",weight:7129},"ユ":{seq:"yo",weight:6653},"ゲ":{seq:"ge",weight:6481},"ォ":{seq:"o",weight:6245},"ヌ":{seq:"nu",weight:2897},"ゾ":{seq:"zo",weight:2640},"ヴ":{seq:"vu",weight:1145},"ヂ":{seq:"di",weight:149},"ヅ":{seq:"du",weight:127},"ヲ":{seq:"wo",weight:122}}),e.Katakana=s,Object.seal(s),Object.freeze(s.prototype)}(a=t.Japanese||(t.Japanese={})),Object.freeze(a)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2);var a;!function(e){class t extends r.Lang{constructor(){super(t,n((e,s,r)=>[e,s,r].flatMap(e=>e.value in t.KEYBOARD?[e.value]:e.atoms.split("")).map(e=>t.KEYBOARD[e]).join("")))}static getInstance(){return this.SINGLETON||(this.SINGLETON=new t,this.KEYBOARD=void 0),this.SINGLETON}}t.SINGLETON=void 0,t.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("kore-dub"),t.KEYBOARD=Object.freeze({"":"","ㅂ":"q","ㅈ":"w","ㄷ":"e","ㄱ":"r","ㅅ":"t","ㅛ":"y","ㅕ":"u","ㅑ":"i","ㅐ":"o","ㅔ":"p","ㅁ":"a","ㄴ":"s","ㅇ":"d","ㄹ":"f","ㅎ":"g","ㅗ":"h","ㅓ":"j","ㅏ":"k","ㅣ":"l","ㅋ":"z","ㅌ":"x","ㅊ":"c","ㅍ":"v","ㅠ":"b","ㅜ":"n","ㅡ":"m","ㅃ":"Q","ㅉ":"W","ㄸ":"E","ㄲ":"R","ㅆ":"T","ㅒ":"O","ㅖ":"P"}),e.Dubeolsik=t,Object.seal(t),Object.seal(t.prototype);class s extends r.Lang{constructor(){super(s,n((e,t,r)=>s.SEB_KEYBOARD.INITIALS[e.value]+s.SEB_KEYBOARD.MEDIALS[t.value]+s.SEB_KEYBOARD.FINALS[r.value]))}static getInstance(){return this.SINGLETON||(this.SINGLETON=new s,this.SEB_KEYBOARD=void 0),this.SINGLETON}}s.SINGLETON=void 0,s.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("kore-sub"),s.SEB_KEYBOARD=Object.freeze({FINALS:{"":"","ㅎ":"1","ㅆ":"2","ㅂ":"3","ㅅ":"q","ㄹ":"w","ㅇ":"a","ㄴ":"s","ㅁ":"z","ㄱ":"x","ㄲ":"!","ㄺ":"@","ㅈ":"#","ㄿ":"$","ㄾ":"%","ㅍ":"Q","ㅌ":"W","ㄵ":"E","ㅀ":"R","ㄽ":"T","ㄷ":"A","ㄶ":"S","ㄼ":"D","ㄻ":"F","ㅊ":"Z","ㅄ":"X","ㅋ":"C","ㄳ":"V"},MEDIALS:{"ㅛ":"4","ㅠ":"5","ㅑ":"6","ㅖ":"7","ㅢ":"8","ㅕ":"e","ㅐ":"r","ㅓ":"t","ㅣ":"d","ㅏ":"f","ㅡ":"g","ㅔ":"c","ㅗ":"v","ㅜ":"b","ㅒ":"G","ㅘ":"vf","ㅙ":"vr","ㅚ":"vd","ㅝ":"bt","ㅞ":"bc","ㅟ":"bd"},INITIALS:{"ㅋ":"0","ㄹ":"y","ㄷ":"u","ㅁ":"i","ㅊ":"o","ㅍ":"p","ㄴ":"h","ㅇ":"j","ㄱ":"k","ㅈ":"l","ㅂ":";","ㅌ":"'","ㅅ":"n","ㅎ":"m","ㄲ":"!","ㄸ":"uu","ㅃ":";;","ㅆ":"nn","ㅉ":"l"}}),e.Sebeolsik=s,Object.seal(s),Object.seal(s.prototype);class a extends r.Lang{constructor(){super(a,n((e,t,s)=>e.roman+t.roman+s.roman))}static getInstance(){return a.SINGLETON||(a.SINGLETON=new a),a.SINGLETON}static remapKey(e){return e}}a.SINGLETON=void 0,a.frontend=r.Lang.GET_FRONTEND_DESC_BY_ID("kore-rom"),e.Romanization=a,Object.seal(a),Object.seal(a.prototype);const n=e=>{const t={};return i.forEach((s,r)=>{o.forEach((a,n)=>{c.forEach((i,l)=>{let u=r;u=o.length*u+n,u=c.length*u+l;const d=String.fromCharCode(44032+u);t[d]={seq:e(s,a,i),weight:h[d]}})})}),t},i=Object.freeze([{value:"ㄱ",atoms:"ㄱ",roman:"g"},{value:"ㄲ",atoms:"ㄱㄱ",roman:"kk"},{value:"ㄴ",atoms:"ㄴ",roman:"n"},{value:"ㄷ",atoms:"ㄷ",roman:"d"},{value:"ㄸ",atoms:"ㄷㄷ",roman:"tt"},{value:"ㄹ",atoms:"ㄹ",roman:"r"},{value:"ㅁ",atoms:"ㅁ",roman:"m"},{value:"ㅂ",atoms:"ㅂ",roman:"b"},{value:"ㅃ",atoms:"ㅂㅂ",roman:"pp"},{value:"ㅅ",atoms:"ㅅ",roman:"s"},{value:"ㅆ",atoms:"ㅅㅅ",roman:"ss"},{value:"ㅇ",atoms:"ㅇ",roman:"-"},{value:"ㅈ",atoms:"ㅈ",roman:"j"},{value:"ㅉ",atoms:"ㅈㅈ",roman:"jj"},{value:"ㅊ",atoms:"ㅊ",roman:"ch"},{value:"ㅋ",atoms:"ㅋ",roman:"k"},{value:"ㅌ",atoms:"ㅌ",roman:"t"},{value:"ㅍ",atoms:"ㅍ",roman:"p"},{value:"ㅎ",atoms:"ㅎ",roman:"h"}]),o=Object.freeze([{value:"ㅏ",atoms:"ㅏ",roman:"a"},{value:"ㅐ",atoms:"ㅐ",roman:"ae"},{value:"ㅑ",atoms:"ㅑ",roman:"ya"},{value:"ㅒ",atoms:"ㅒ",roman:"yae"},{value:"ㅓ",atoms:"ㅓ",roman:"eo"},{value:"ㅔ",atoms:"ㅔ",roman:"e"},{value:"ㅕ",atoms:"ㅕ",roman:"yeo"},{value:"ㅖ",atoms:"ㅖ",roman:"ye"},{value:"ㅗ",atoms:"ㅗ",roman:"o"},{value:"ㅘ",atoms:"ㅗㅏ",roman:"wa"},{value:"ㅙ",atoms:"ㅗㅐ",roman:"wae"},{value:"ㅚ",atoms:"ㅗㅣ",roman:"oe"},{value:"ㅛ",atoms:"ㅛ",roman:"yo"},{value:"ㅜ",atoms:"ㅜ",roman:"u"},{value:"ㅝ",atoms:"ㅜㅓ",roman:"wo"},{value:"ㅞ",atoms:"ㅜㅔ",roman:"we"},{value:"ㅟ",atoms:"ㅜㅣ",roman:"wi"},{value:"ㅠ",atoms:"ㅠ",roman:"yu"},{value:"ㅡ",atoms:"ㅡ",roman:"eu"},{value:"ㅢ",atoms:"ㅡㅣ",roman:"ui"},{value:"ㅣ",atoms:"ㅣ",roman:"i"}]),c=Object.freeze([{value:"",atoms:"",roman:""},{value:"ㄱ",atoms:"ㄱ",roman:"k"},{value:"ㄲ",atoms:"ㄱㄱ",roman:"k"},{value:"ㄳ",atoms:"ㄱㅅ",roman:"kt"},{value:"ㄴ",atoms:"ㄴ",roman:"n"},{value:"ㄵ",atoms:"ㄴㅈ",roman:"nt"},{value:"ㄶ",atoms:"ㄴㅎ",roman:"nt"},{value:"ㄷ",atoms:"ㄷ",roman:"t"},{value:"ㄹ",atoms:"ㄹ",roman:"l"},{value:"ㄺ",atoms:"ㄹㄱ",roman:"lk"},{value:"ㄻ",atoms:"ㄹㅁ",roman:"lm"},{value:"ㄼ",atoms:"ㄹㅂ",roman:"lp"},{value:"ㄽ",atoms:"ㄹㅅ",roman:"lt"},{value:"ㄾ",atoms:"ㄹㅌ",roman:"lt"},{value:"ㄿ",atoms:"ㄹㅍ",roman:"lp"},{value:"ㅀ",atoms:"ㄹㅎ",roman:"lt"},{value:"ㅁ",atoms:"ㅁ",roman:"m"},{value:"ㅂ",atoms:"ㅂ",roman:"p"},{value:"ㅄ",atoms:"ㅂㅅ",roman:"pt"},{value:"ㅅ",atoms:"ㅅ",roman:"t"},{value:"ㅆ",atoms:"ㅅㅅ",roman:"t"},{value:"ㅇ",atoms:"ㅇ",roman:"ng"},{value:"ㅈ",atoms:"ㅈ",roman:"t"},{value:"ㅊ",atoms:"ㅊ",roman:"t"},{value:"ㅋ",atoms:"ㅋ",roman:"k"},{value:"ㅌ",atoms:"ㅌ",roman:"t"},{value:"ㅍ",atoms:"ㅍ",roman:"p"},{value:"ㅎ",atoms:"ㅎ",roman:"t"}]),h=Object.freeze({"":1})}(a=t.Korean||(t.Korean={})),Object.freeze(a)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(2);var a;!function(e){class t extends r.Lang{}e.Encode=t,Object.freeze(t),Object.freeze(t.prototype);class s extends r.Lang{}e.Decode=s,Object.freeze(s),Object.freeze(s.prototype)}(a=t.Morse||(t.Morse={})),Object.freeze(a)}]);
//# sourceMappingURL=index.js.map