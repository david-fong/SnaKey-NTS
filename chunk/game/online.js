/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunksnakey3"] = self["webpackChunksnakey3"] || []).push([["game/online"],{

/***/ "./src/client/game/OnlineGame.ts":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"OnlineGame\": () => /* binding */ OnlineGame\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./src/base/defs/OnlineDefs.ts\");\n/* harmony import */ var _BrowserGame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./src/client/game/BrowserGame.ts\");\n/* harmony import */ var game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./src/base/game/events/PlayerActionEvent.ts\");\n/* harmony import */ var game_gameparts_GamepartEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./src/base/game/gameparts/GamepartEvents.ts\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n *\r\n */\r\nclass OnlineGame extends game_gameparts_GamepartEvents__WEBPACK_IMPORTED_MODULE_3__.GamepartEvents {\r\n    /**\r\n     * Note that this class does not extend `GameManager`.\r\n     *\r\n     * @param gameSocket - Used to make a Game socket.\r\n     * @param gameDesc - This should come from a Server event by the name {@link GroupEv.CREATE}.\r\n     */\r\n    constructor(onGameBecomeOver, gameSocket, gameDesc) {\r\n        super(_BrowserGame__WEBPACK_IMPORTED_MODULE_1__.Game.Type.ONLINE, {\r\n            onGameBecomeOver,\r\n            tileClass: _BrowserGame__WEBPACK_IMPORTED_MODULE_1__.VisibleTile,\r\n            playerStatusCtor: _BrowserGame__WEBPACK_IMPORTED_MODULE_1__.VisiblePlayerStatus,\r\n        }, gameDesc);\r\n        this.socket = gameSocket;\r\n        this._ctorBrowserGame();\r\n        if (this.socket.hasListeners(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.MOVEMENT))\r\n            throw new Error(\"never\");\r\n        this.socket.on(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.MOVEMENT, this.executePlayerMoveEvent.bind(this));\r\n        if (this.socket.hasListeners(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.BUBBLE))\r\n            throw new Error(\"never\");\r\n        this.socket.on(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.BUBBLE, this.executePlayerBubbleEvent.bind(this));\r\n        this.socket.off(defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__.GameEv.RESET);\r\n        if (this.socket.hasListeners(defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__.GameEv.RESET))\r\n            throw new Error(\"never\");\r\n        this.socket.on(defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__.GameEv.RESET, (ser) => (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__awaiter)(this, void 0, void 0, function* () {\r\n            yield this.reset();\r\n            this.deserializeResetState(ser);\r\n            // See the PlayOnline screen for the registration of\r\n            // listeners for the server confirmation.\r\n            this.socket.emit(defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__.GameEv.UNPAUSE);\r\n        }));\r\n        this.socket.emit(defs_OnlineDefs__WEBPACK_IMPORTED_MODULE_0__.GameEv.RESET);\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    _createArtifPlayer(desc) {\r\n        return new _BrowserGame__WEBPACK_IMPORTED_MODULE_1__.Player(this, desc);\r\n    }\r\n    /**\r\n     * Normally calls {@link Game#processMoveExecute}. However, here,\r\n     * that should be done as a callback to an event created by the\r\n     * server.\r\n     *\r\n     * @override\r\n     */\r\n    processMoveRequest(desc) {\r\n        this.socket.emit(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.MOVEMENT, desc);\r\n    }\r\n    /**\r\n     * Normally calls {@link Game#processBubbleMakeExecute}. However,\r\n     * here, that should be done as a callback to an event created by\r\n     * the server.\r\n     *\r\n     * @override\r\n     */\r\n    processBubbleRequest(desc) {\r\n        this.socket.emit(game_events_PlayerActionEvent__WEBPACK_IMPORTED_MODULE_2__.PlayerActionEvent.EVENT_NAME.BUBBLE, desc);\r\n    }\r\n}\r\n;\r\n_BrowserGame__WEBPACK_IMPORTED_MODULE_1__.JsUtils.applyMixins(OnlineGame, [_BrowserGame__WEBPACK_IMPORTED_MODULE_1__.BrowserGameMixin]);\r\nObject.freeze(OnlineGame);\r\nObject.freeze(OnlineGame.prototype);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2xpZW50L2dhbWUvT25saW5lR2FtZS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL3NuYWtleTMvLi9zcmMvY2xpZW50L2dhbWUvT25saW5lR2FtZS50cz9lOWZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciB9IGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBHYW1lRXYgfSBmcm9tIFwiZGVmcy9PbmxpbmVEZWZzXCI7XHJcbmltcG9ydCB7IEpzVXRpbHMsIEdhbWUsIFZpc2libGVUaWxlLCBCcm93c2VyR2FtZU1peGluLCBQbGF5ZXIsIFZpc2libGVQbGF5ZXJTdGF0dXMsIH0gZnJvbSBcIi4vQnJvd3NlckdhbWVcIjtcclxuaW1wb3J0IHsgUGxheWVyQWN0aW9uRXZlbnQgfSBmcm9tIFwiZ2FtZS9ldmVudHMvUGxheWVyQWN0aW9uRXZlbnRcIjtcclxuaW1wb3J0IHsgR2FtZXBhcnRFdmVudHMgfSBmcm9tIFwiZ2FtZS9nYW1lcGFydHMvR2FtZXBhcnRFdmVudHNcIjtcclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT25saW5lR2FtZSBleHRlbmRzIEdhbWVwYXJ0RXZlbnRzIHtcclxuICAgIC8qKlxyXG4gICAgICogTm90ZSB0aGF0IHRoaXMgY2xhc3MgZG9lcyBub3QgZXh0ZW5kIGBHYW1lTWFuYWdlcmAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGdhbWVTb2NrZXQgLSBVc2VkIHRvIG1ha2UgYSBHYW1lIHNvY2tldC5cclxuICAgICAqIEBwYXJhbSBnYW1lRGVzYyAtIFRoaXMgc2hvdWxkIGNvbWUgZnJvbSBhIFNlcnZlciBldmVudCBieSB0aGUgbmFtZSB7QGxpbmsgR3JvdXBFdi5DUkVBVEV9LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvbkdhbWVCZWNvbWVPdmVyLCBnYW1lU29ja2V0LCBnYW1lRGVzYykge1xyXG4gICAgICAgIHN1cGVyKEdhbWUuVHlwZS5PTkxJTkUsIHtcclxuICAgICAgICAgICAgb25HYW1lQmVjb21lT3ZlcixcclxuICAgICAgICAgICAgdGlsZUNsYXNzOiBWaXNpYmxlVGlsZSxcclxuICAgICAgICAgICAgcGxheWVyU3RhdHVzQ3RvcjogVmlzaWJsZVBsYXllclN0YXR1cyxcclxuICAgICAgICB9LCBnYW1lRGVzYyk7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBnYW1lU29ja2V0O1xyXG4gICAgICAgIHRoaXMuX2N0b3JCcm93c2VyR2FtZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnNvY2tldC5oYXNMaXN0ZW5lcnMoUGxheWVyQWN0aW9uRXZlbnQuRVZFTlRfTkFNRS5NT1ZFTUVOVCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5ldmVyXCIpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKFBsYXllckFjdGlvbkV2ZW50LkVWRU5UX05BTUUuTU9WRU1FTlQsIHRoaXMuZXhlY3V0ZVBsYXllck1vdmVFdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBpZiAodGhpcy5zb2NrZXQuaGFzTGlzdGVuZXJzKFBsYXllckFjdGlvbkV2ZW50LkVWRU5UX05BTUUuQlVCQkxFKSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibmV2ZXJcIik7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQub24oUGxheWVyQWN0aW9uRXZlbnQuRVZFTlRfTkFNRS5CVUJCTEUsIHRoaXMuZXhlY3V0ZVBsYXllckJ1YmJsZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9mZihHYW1lRXYuUkVTRVQpO1xyXG4gICAgICAgIGlmICh0aGlzLnNvY2tldC5oYXNMaXN0ZW5lcnMoR2FtZUV2LlJFU0VUKSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibmV2ZXJcIik7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQub24oR2FtZUV2LlJFU0VULCAoc2VyKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucmVzZXQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZXNlcmlhbGl6ZVJlc2V0U3RhdGUoc2VyKTtcclxuICAgICAgICAgICAgLy8gU2VlIHRoZSBQbGF5T25saW5lIHNjcmVlbiBmb3IgdGhlIHJlZ2lzdHJhdGlvbiBvZlxyXG4gICAgICAgICAgICAvLyBsaXN0ZW5lcnMgZm9yIHRoZSBzZXJ2ZXIgY29uZmlybWF0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLnNvY2tldC5lbWl0KEdhbWVFdi5VTlBBVVNFKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChHYW1lRXYuUkVTRVQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgX2NyZWF0ZUFydGlmUGxheWVyKGRlc2MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBsYXllcih0aGlzLCBkZXNjKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTm9ybWFsbHkgY2FsbHMge0BsaW5rIEdhbWUjcHJvY2Vzc01vdmVFeGVjdXRlfS4gSG93ZXZlciwgaGVyZSxcclxuICAgICAqIHRoYXQgc2hvdWxkIGJlIGRvbmUgYXMgYSBjYWxsYmFjayB0byBhbiBldmVudCBjcmVhdGVkIGJ5IHRoZVxyXG4gICAgICogc2VydmVyLlxyXG4gICAgICpcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICovXHJcbiAgICBwcm9jZXNzTW92ZVJlcXVlc3QoZGVzYykge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoUGxheWVyQWN0aW9uRXZlbnQuRVZFTlRfTkFNRS5NT1ZFTUVOVCwgZGVzYyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGx5IGNhbGxzIHtAbGluayBHYW1lI3Byb2Nlc3NCdWJibGVNYWtlRXhlY3V0ZX0uIEhvd2V2ZXIsXHJcbiAgICAgKiBoZXJlLCB0aGF0IHNob3VsZCBiZSBkb25lIGFzIGEgY2FsbGJhY2sgdG8gYW4gZXZlbnQgY3JlYXRlZCBieVxyXG4gICAgICogdGhlIHNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0J1YmJsZVJlcXVlc3QoZGVzYykge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmVtaXQoUGxheWVyQWN0aW9uRXZlbnQuRVZFTlRfTkFNRS5CVUJCTEUsIGRlc2MpO1xyXG4gICAgfVxyXG59XHJcbjtcclxuSnNVdGlscy5hcHBseU1peGlucyhPbmxpbmVHYW1lLCBbQnJvd3NlckdhbWVNaXhpbl0pO1xyXG5PYmplY3QuZnJlZXplKE9ubGluZUdhbWUpO1xyXG5PYmplY3QuZnJlZXplKE9ubGluZUdhbWUucHJvdG90eXBlKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/client/game/OnlineGame.ts\n");

/***/ })

}]);