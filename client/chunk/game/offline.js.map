{"version":3,"sources":["webpack://capswalk/./src/base/game/gameparts/ScoreInfo.ts","webpack://capswalk/./src/base/game/player/RobotPlayer.ts","webpack://capswalk/./src/base/game/player/robots/Chaser.ts","webpack://capswalk/./src/base/game/gameparts/GameManager.ts","webpack://capswalk/./src/base/game/ctormaps/CmapManager.ts","webpack://capswalk/./src/client/game/OfflineGame.ts"],"names":["ScoreInfo","playerIds","entries","id","Entry","this","JsUtils","Object","seal","entry","reset","moveCounts","getOwnPropertyNames","Player","forEach","key","freeze","prototype","game","desc","super","_nextMovementTimerMultiplier","_scheduledMovementCallbackId","_delayedMovementContinue","cancelTimeout","desiredDest","computeDesiredDest","grid","tileAt","seq","length","makeMovementRequest","getUntToward","coord","getNextMoveType","setTimeout","_movementContinue","bind","computeNextMovementTimer","_Constructors","of","playerDesc","familyId","which","reuses","target","c","Game","next","_behaviours","call","dest","i","Error","Decisive","RobotPlayer","Chaser","pred","prey","params","Behaviour","DEFAULT","familyArgs","_onTeamsBootstrapped","teams","filter","team","teamId","flatMap","members","cachedPred","getUntAwayFrom","players","sort","pa","pb","dist","fearDistance","isDowned","boosts","playerId","cachedPrey","bloodThirstDistance","healthReserve","cachedHealthCoord","Math","random","wanderingAimlessness","getRandomCoordAround","awayFn","prevCoord","keyPressesPerSecond","assign","Grid","Robot","GameMirror","args","lang","scoreInfo","map","player","Lang","langId","then","LangConstructor","langWeightExaggeration","resetSer","playerCoords","csps","forEachShuffled","tile","index","csp","dryRunShuffleLangCspAt","write","spawnPoints","static","getSpawnCoords","dimensions","teamIndex","member","memberIndex","avoid","getAllAltDestsThan","getNonConflictingChar","req","authorSock","author","lastRejectId","reqBuffer","status","isOccupied","moveDest","commitStateChange","rejectId","getNextRejectId","moveIsBoost","moveType","authorNewBoosts","tiles","GameManager","CHECK_VALID_CTOR_ARGS","bad","requiredFields","coordSys","gridDimensions","missingFields","fieldName","field","push","langDesc","gridClass","isolatedMinOpts","ambiguityThreshold","max","parseFloat","OfflineGame","onGameBecomeOver","gameDesc","impl","gridClassLookup","VisibleGrid","OperatorPlayer","operatorIds","p","callback","millis","handle","clearTimeout"],"mappings":"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","file":"chunk/game/offline.js","sourceRoot":""}